<!doctype html>
<html>
<head>
    <meta charset="utf-8" />
    <title>PokerCast</title>
    <!-- include Google's chromecast receiver code -->
    <script type="text/javascript" src="http://www.gstatic.com/cast/sdk/libs/receiver/2.0.0/cast_receiver.js"></script>
    <!-- include jquery -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <!-- include the cast framework! -->
    <script src="js/framework/CastFramework.js"></script>
    <!-- include KnockoutJS -->
    <script src="http://cdnjs.cloudflare.com/ajax/libs/knockout/3.1.0/knockout-debug.js"></script>
    <!-- include view models -->
    <script src="js/viewModels/Game.js"></script>
    <script src="js/viewModels/Hand.js"></script>
    <script src="js/viewModels/Player.js"></script>
    <script src="js/viewModels/AIPlayer.js"></script>
    <!-- include JS file(s) -->
    <script src="js/main.js"></script>
    <script src="js/cards.js"></script>
    <script src="js/winner.js"></script>
    <script src="js/hand_types.js"></script>
    <!-- include CSS file(s) -->
    <link rel="stylesheet" type="text/css" href="css/style.css">
</head>
<body>
    <div id="table">
        <div id="cards">
            <!-- ko ifnot: game.hand() -->
                <h1>Waiting for players...</h1>
            <!-- /ko -->
            <!-- ko if: game.hand() -->
                <!-- ko foreach: game.hand().cardsOnTable -->
                    <img class="card" data-bind="
                        text: value,
                        attr: {
                            'src': 'img/cards/'+suit+value+'.png'
                        }">
                <!-- /ko -->
                <div id="pot">
                    <div class="floatingDialog" style="font-size:50px; font-weight:bold" data-bind="text: game.hand().pot"></div>
                </div>
            <!-- /ko -->
        </div>
        <div id="score" data-bind="visible: game.activePlayers().length > 0">
            <!-- ko foreach: game.activePlayers -->
            <div class="player floatingDialog" data-bind="
                css: {
                    turn: isTurn
                }
            ">
                <div class="player-name" data-bind="
                    text: name || 'Player ' + ($index()+1)
                ">
                </div>
                <div class="player-action" data-bind="
                    text: action,
                    css: {
                        fold: action().indexOf('Fold') != -1,
                        bet: action().indexOf('Bet') != -1,
                        raise: action().indexOf('Raise') != -1,
                        call: action().indexOf('Call') != -1
                    }"></div>
                <div class="player-chips">
                    <span data-bind="text: chips"></span> chips
                </div>
            </div>
            <!-- /ko -->
        </div>
        <!-- ko if: game.hand() && game.hand().round() >= 4 -->
            <div id="winner">
                <div class="floatingDialog" style="font-size:50px; font-weight:bold"><span data-bind="text: game.activePlayers()[0].name"></span> wins!</div>
            </div>
        <!-- /ko -->
    </div>
    <script>
        var game = new Game();
        ko.applyBindings(game);
    </script>
</body>
</html>